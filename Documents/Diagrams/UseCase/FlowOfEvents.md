# Поток событий
---

# Содержание
1 [Актёры](#actors)  
2 [Варианты использования](#use_case)  
2.1 [Войти в приложение](#authorize)  
2.2 [Зарегистрироваться](#register)   
2.3 [Войти в свою учетную запись](#login)
2.4 [Войти в приложение без авторизации](#login_without_authorization)  
2.5 [Просмореть список товаров](#view_products)  
2.6 [Просмотреть товар подробно](#view_details)    
2.7 [Создать заказ](#create_order)
2.8 [Выйти из учетной записи](#sign_out)  

<a name="actors"/>

# 1 Актёры

| Актёр | Описание |
|:--|:--|
| Пользователь | Человек, находящийся в системе |
| Анонимный пользователь | Пользователь, который использует приложение без регистрации в нём |
| Зарегистрированный пользователь | Пользователь, который зарегистрировался в приложении |
| Продукт | Кондитерское изделие, которое продается в приложении |

<a name="use_case"/>

# 2 Варианты использования

<a name="authorize"/>

## 2.1 Войти в приложение

**Описание.** Вариант использования "Войти в приложение" позволяет пользователю войти в приложение.  
**Основной поток.**
1. Вариант использования начинается, когда пользователь запускает приложение;
2. Есть 3 варианта входа в приложение: [авторизироваться](#login), [зарегистрироваться](#register), [войти без регистрации](#login_without_registration);
3. Пользователь выбирает один из способов входа;
4. Выполняется вариант использования, связанный с выбранным способом входа в приложение;
5. Приложение закрывает форму входа;
6. Приложение отображает главную страницу приложения, соответствующую статусу пользователя;
7. Вариант использования завершается.

<a name="register"/>

## 2.2 Зарегистрироваться

**Описание.** Вариант использования "Зарегистрироваться" позволяет пользователю создать свою учётную запись в приложении.  
**Предусловия.** Пользователь выбрал способ "Зарегистрироваться" для входа в приложение или анонимный пользователь выразил желание зарегистрироваться в приложении, выбрав пункт меню "Зарегистрироваться".  
**Основной поток.**
1. Приложение отображает форму регистрации;
2. Пользователь вводит свои данные (логин и пароль);
3. Пользователь подтверждает ввод данных;
4. Приложение проверят введённый логин на совпадение в базе данных. Если совпадение выявлено, выполняется альтернативный поток А1;
5. Приложение сохраняет данные пользователя в базу данных;
6. Приложение скрывает форму регистрации;
7. Вариант использования завершается.

**Альтернативный поток А1.**
1. Приложение сообщает пользователю, что пользователь с таким логином уже существует;
2. Приложение запрашивает у пользователя повторный ввод данных;
3. Возврат к п.2 основного потока.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до подтверждения ввода данных. В случае отмены выполняется альтернативный поток А2.

**Альтернативный поток А2.**
1. Приложение скрывает форму регистрации;
2. Вариант использования завершается досрочно.

<a name="login"/>

## 2.3 Войти в свою учётную запись

**Описание.** Вариант использования "Войти в свою учётную запись" позволяет пользователю войти в учётную запись.  
**Предусловия.** Пользователь выбрал способ "Войти в свою учётную запись" для входа в приложение.  
**Основной поток.**
1. Приложение отображает форму входа в учётную запись;
2. Пользователь вводит свой логин и пароль;
3. Пользователь подтверждает ввод данных;
4. Приложение проверяет данные;
5. В случае нахождение данного пользователя риложение присваивает пользователю статус "online";
6. Приложение скрывает форму входа;
7. Вариант использования завершается.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до подтверждения ввода данных. В случае отмены выполняется альтернативный поток А3.

**Альтернативный поток А3.**
1. Приложение скрывает форму входа в учётную запись;
2. Вариант использования завершается досрочно.

<a name="login_without_authorization"/>

## 2.4 Войти без авторизации

**Описание.** Вариант использования "Войти без авторизации" позволяет пользователю войти в приложение без регистрации.  
**Предусловия.** Пользователь выбрал способ "Войти без регистрации" для входа в приложение.  
**Основной поток.**
1. Приложение присваивает пользователю статус "аноним";
2. Вариант использования завершается.

<a name="view_products"/>

## 2.5 Посмотреть список товаров

**Описание.** Вариант использования "Посмотреть список товаров" загружает информацию с заранее заполненнной базы данных.  
**Предусловия.** Пользователь вошёл в приложение.  
**Основной поток.**
1. Приложение загружает список товаров их базы данных;
2. Если список закончился, переход к п.8 основного потока;
3. Приложение отображает загруженные товары на странице каталога;
4. При нажатии на товаре "Подробно" переходит к варианту использования "Посмотреть товар подробно"
4. Вариант использования завершается.

<a name="view_details"/>

## 2.6 Посмотреть товар подробно

**Описание.** Вариант использования "Посмотреть товар подробно" отображает более подробную информацию о товаре, чем в катологе.  
**Предусловия.** Был инициирован вариант использования "[Посмотреть список товаров](#view_products)".  
**Основной поток.**
1. Приложение получает детальную информацию о товаре из базы данных приложения;
2. Если такие данные отсутствую, переход к п.6;
3. Приложение отображает полученные данные на странице товара;
4. При выборе параметров продукта и нажатии кнопки "Добавить в корзину" товар добавлявется в корзину;
5. При нажатии "Вернуть в каталог" возвращается к варианту использования "Посмотреть список товаров";
6. Вариант использования завершается.

<a name="create_order"/>

## 2.7 Создать заказ

**Описание.** Вариант использования "Создать" позволяет зарегистрированному пользователю оплатить товары в корзине и приобрести их.  
**Предусловия.** Зарегистрированный пользователь выбрал "Перейти в корзину" на панели инструментов.  
**Основной поток.**
1. Пользователь выбирает "Оплатить" на странице корзины пользователя;
2. Приложение отображает товары и их стоимость;
3. Пользователь подтверждает действие;
4. В случае отказа переход к п.8;
5. Приложение предлагает варианты оплаты и отображает соответствующую форму оплаты товаров;
6. Пользователь выбирает способ оплаты и заполняет необходимые данные;
7. Приложение проверяет данные и ожидает уведомления об успешной оплате. В случае отказа выполняется альтернативный поток А4;
8. Вариант использования завершается.

**Альтернативный поток А4.**
1. Приложение сообщает пользователю об ошибке оплаты;
2. Возврат к п.5 основного потока.

<a name="sign_out"/>

## 2.14 Выйти из учетной записи

**Описание.** Вариант использования "Выйти из учётной записи" позволяет зарегистрированному пользователю выйти из учётной записи.  
**Предусловия.** Пользователь зарегистрирован в приложении и вошёл в него.   
**Основной поток.**
1. Вариант использования начинается, когда зарегистрированный пользователь выбирает пункт меню "Выйти из учётной записи" на главном окне приложения;
2. Приложение скрывает главное окно приложения;
3. Приложение отображает форму входа в приложение;
4. Вариант использования завершается.